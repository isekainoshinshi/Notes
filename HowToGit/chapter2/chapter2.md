# 在.git文件中都有些什么

首先，git中有4类文件，分别是`tree, blob, commit, tag`. 这些文件组成了.git文件夹的内容。
这个文件夹是实现git版本控制的核心，其中包括objects等文件夹。

## objects文件夹中的内容

在通过add添加过文件之后，可以发现在该文件夹内出现了以两个字符命名的文件夹以及info、pack文件夹。
下面先介绍在使用过程中会产生的最多的类型的文件夹"两个字符命名的文件夹"。

这类文件夹名是通过一下规则命名的：

	内容 = 压缩算法(实际文件中的内容)
	长字符串 = SHA-1(文件类型 + 空格 + 内容长度 + 空字符 + 内容)
	长字符串 = 文件夹名 + 文件夹内文件名

	其中SHA-1是secure hash algorithm算法的缩写；长字符串长度为40个16进制字符，也就是哈希值。

通过上面的介绍可以知道每个文件夹以及其中的文件的命名规则，
而在哈希值文件中则存储着对应文件中的内容，可以通过下面的命令对文件信息进行查看。

```bash
git cat-file -s [文件字符串]	//查看文件大小
git cat-file -t [文件字符串]	//查看文件类型
git cat-file -p [文件字符串]	//查看文件内容
```

在介绍完object文件夹内存在的最多的文件之后，再来介绍这些文件所对应的类型，以及这些类型的功能是什么。

### blob

blob类型的文件中存储着所对应文件的内容，并且在执行完`add`之后被创建。
当然，如果只是1：1的去复制的话未免效率太低了，所以，在blob类型文件中存储的内容是经过压缩算法得到的。

### tree

tree类型的文件中会保存有相应目录下的文件及文件夹的哈希值,并且在`commit`之后被创建。

举个例子来说明tree文件和blob文件的关系：
```
假设我在/example这个路径下执行了git init，那么此时在该路径下就会自动创建.git文件夹。
接着，我在该目录下
mkdir dir1
touch file1
mkdir dir1/file2
echo '123' >> file1
echo '345' >> dir1/file2
git add -a
这样的话，在.git/object/下就会出现四个文件。
其中两个对应着tree类型，分别是example和dir1；两个对应着blob类型，分别是file1和file2。
在example对应的哈希值文件的内容则是dir1和file1的哈希值。
在dir1对应的哈希值文件的内容则是file2的哈希值。
```
在这个例子中还有一个细节需要注意，那就是为什么我对两个文件中都写入了内容，
因为从最开始提到的哈希值计算的方式可以看出，如果一个文件夹内没有内容，
它是无法得到哈希值的，所以git无法检测到这个文件夹，因而我才在file2中写入了内容。

### commit

